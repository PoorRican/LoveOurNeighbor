{% macro campaign_date_input_scripts(selector='.pickadate') %}
  {# This activates pickadate functionality on start_date and end_date elements,
      and activates date validation (modified from https://codepen.io/amsul/pen/nGckA).
   #}

  <script src="https://cdn.jsdelivr.net/npm/pickadate@3.5.6/lib/compressed/picker.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pickadate@3.5.6/lib/compressed/picker.date.min.js"></script>
  <script>
    const pickerOptions = {
      formatSubmit: 'mm/dd/yyyy',
      hiddenName: true,
      onSet: function () {
        this.$node.parent().children()[4].classList = ["active"];
      }
    };
    $('.pickadate').pickadate(pickerOptions);

    let from_picker = $('#start_date').pickadate('picker');
    let to_picker = $('#end_date').pickadate('picker');

    from_picker.set('min', true);

    // Check if there’s a “from” or “to” date to start with.
    if (from_picker.get('value')) {
      to_picker.set('min', from_picker.get('select'))
    }
    if (to_picker.get('value')) {
      from_picker.set('max', to_picker.get('select'))
    }

    // When something has been selected, update the “from” and “to” limits.
    from_picker.on('set', function (event) {
      if (event.select) {
        to_picker.set('min', from_picker.get('select'))
      } else if ('clear' in event) {
        to_picker.set('min', false)
      }
    });
    to_picker.on('set', function (event) {
      if (event.select) {
        from_picker.set('max', to_picker.get('select'))
      } else if ('clear' in event) {
        from_picker.set('max', false)
      }
    })
  </script>

{% endmacro %}