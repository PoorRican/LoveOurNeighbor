{# templates/objects/layout_objects.html #}

{% set links =
  [
    ('home', 'Home'),
    ('campaigns', 'Timeline'),
    ('faq', 'FAQ'),
    ('about', 'About Us')
  ]
%}


{% macro user_widget(request) %}

    {% if request.user.is_authenticated %}
      <a href="#{{ url_for('user_profile') }}" class="uname">
        <img class="profile-img" src="{{ request.user.profile.avatar_url }}">
        <span>{{- request.user.profile.name -}}</span>
      </a>

      <a class="logout" href="/accounts/logout/">Logout</a>
    {% else %}
      <a class="login" href="#/accounts/login/">Login</a>
    {% endif %}

{% endmacro %}


{% macro navbar_links(request) %}

    <header>
      <div class="md-toolbar-items" layout="row" layout-align="left end">

        <a class="title-shadow-orange brand-logo center md-accent" href="#home" layout-padding>Love Your Neighbors</a>

        <md-nav-bar ng-model="currentNavItem" class="md-accent" md-selected-nav-item="currentNavItem" hide-xs hide-sm>
        {%- for _link in links -%}
          <md-nav-item md-nav-href="#{{ _link[0] }}" name="{{ _link[1] }}">
              {{ _link[1] }}
          </md-nav-item>
        {%- endfor -%}
        </md-nav-bar>

        <div layout="row" class="search-bar">
          <form name="search" method="GET" ng-submit="get_search()">
            {# TODO: show icon #}
            <!--label>Search:&nbsp;</label-->
            <input ng-model="query" placeholder="Search">
          </form>
        </div>

        <div class="profile-area" hide-xs hide-sm>
          {{ user_widget(request) }}
        </div>

        {# Hidden Side Nav Button #}
        <md-button style="font-size: 2em; margin: auto 15px auto auto;" ng-click="toggleRight()" hide-gt-sm>
          <i class="fa fa-bars" aria-hidden="true"></i>
        </md-button>
      </div>
    </header>
    <div style="height: 40px;"></div>

{% endmacro %}


{% macro sidenav(request) %}

    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" id="sidenav"
                md-component-id="right" layout-padding layout="column">
      <div class="top">
        <div class="profile-area">
          {{ user_widget(request) }}
        </div>

        <md-button ng-click="close()" class="pull-right md-icon-button">
          <i class="fa fa-times" aria-hidden="true"></i>
        </md-button>
      </div>

      <md-list flex>
      {%- for _link in links -%}
        <a href="#{{ _link[0] }}" name="{{ _link[1] }}">
          <md-list-item class="md-line-1" ng-click="close()">{{ _link[1] }}</md-list-item>
        </a>
      {%- endfor -%}
     </md-list>
    </md-sidenav>

{% endmacro %}


{% macro footer() %}

      <footer class="page-footer">
        <div class="footer-top">
          <div class="social-media-links">
            <a class="waves-effect waves-teal btn-flat">
              <img src="{{ static('img/igram-icon.png') }}">
            </a>
            <a class="waves-effect waves-teal btn-flat">
              <img src="{{ static('img/facebook-icon.png') }}">
            </a>
            {# TODO: import YouTube and other SM links #}
          </div>
        </div>
        <div id="sitemap">
          <ul>
            {%- for _link in links -%}
              <li>
                <a href="#/{{ _link[0] }}" name="{{ _link[1] }}">
                  {{ _link[1] }}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
        <div class="footer-copyright">
            Â© 2019 Love Your Neighbors
        </div><!-- ./page-footer -->
      </footer>

{% endmacro %}
