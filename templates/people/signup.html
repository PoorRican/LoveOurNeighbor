{# vim: foldmethod=marker tabstop=2 shiftwidth=2:
    templates/people/signup.html
#}
{% extends "layout.html" %}

{% block title %}Sign-up{% endblock %}

{% block body %}
  <section class="wrapper" ng-app="LON">
  <h1>Sign Up</h1>

    <p>Already have an account? Then please <a href="{{ url_for('people:login') }}">sign in</a>.</p>

    <div ng-controller="signUpCtrl">
      <form class="signup" name="signupForm" method="post" action="{{ url_for('people:create_user') }}">

        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

        <div layout="column" layout-padding class="md-inline-form" flex-gt-sm="50">
          <md-input-container>
            <label>Email</label>
            <input name="email" type="email" required
                   minlength="9" maxlength="64"
                   ng-model="email"
                   ng-pattern="/^.+@.+\..+$/"/>
            <div ng-messages="signupForm.email.$error" role="alert">
              <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                Your email must be between 10 and 64 characters long and look like an e-mail address.
              </div>
            </div><!-- /ng-messages -->
          </md-input-container><!-- /email -->
          <md-input-container>
            {{ form.password.label_tag() }}
            <input type="password" name="password" required
                   minlength="9" maxlength="64"
                   ng-model="password"/>
            <div ng-messages="signupForm.password.$error" role="alert">
              <div ng-message-exp="['required']">
                You must enter a password, silly!
              </div>
              <div ng-message-exp="['minlength', 'maxlength']">
                Your password must be between 9 and 64 characters long and be sufficiently complex.
              </div>
            </div><!-- /ng-messages -->
          </md-input-container><!-- /password -->
          <md-input-container>
            <label>Password (again)</label>
            <input type="password" name="password2" required
                   minlength="9" maxlength="64"
                   ng-pattern="cleanPasswordPattern()"
                   ng-model="password2">
            <div ng-messages="signupForm.password2.$error" role="alert">
              <div ng-message-exp="['pattern']">
                Password does not match
              </div>
              <div ng-message-exp="['required']">
                You must enter a password, silly!
              </div>
              <div ng-message-exp="['minlength', 'maxlength']">
                Your password must be between 9 and 64 characters long and be sufficiently complex.
              </div>
            </div><!-- /ng-messages -->
          </md-input-container><!-- /password2 -->
          <md-input-container>
            {{ form.first_name.label_tag() }}
            {{ form.first_name }}
          </md-input-container><!-- /first_name -->
          <md-input-container>
            {{ form.last_name.label_tag() }}
            {{ form.last_name }}
          </md-input-container><!-- /last_name -->
        </div>

        <md-button type="submit" class="md-raised md-primary">Sign Up&nbsp;&raquo;</md-button>

      </form>
    </div>
  </section>
{% endblock %}


{% block scripts %}
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.6/angular-messages.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.js"></script>

  {% set page_assets = (
  'app.module.js',
  'app.config.js',
  'people/signup.controller.js',
  ) %}
  {% for f in page_assets %}
    <script src="{{ static('app/%s' % f) }}"></script>
  {% endfor %}

  <script>
    let input = document.getElementsByName('email')[0];
    input.focus();
  </script>

{% endblock %}


{% block css %}
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.12/angular-material.min.css">
{% endblock %}
